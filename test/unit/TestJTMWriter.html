<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>FIXMETest</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <script type="text/javascript" src="../assets/jsunittest.js"></script>
  <script type="text/javascript" src="../../src/tm-src.js"></script>
  <script type="text/javascript" src="../../src/tm-jtm.js"></script>
  <script type="text/javascript" src="datatypeaware.js"></script>
  <script type="text/javascript" src="tmunittest.js"></script>
  <link type="text/css" rel="stylesheet" href="../assets/unittest.css" />
</head>
<body>

<!-- Log output -->
<div id="testlog"> </div>

<!-- here go any elements you do the testing on -->

<!-- Tests -->
<script type="text/javascript" language="javascript">
// <![CDATA[

var tmp = new Test.Unit.Runner({
    // optional setup function, run before each individual test case
    setup: function () { with(this) {
        TMUnitTest.addCommonSetupFunctions(this);
    }},
    // optional teardown function, run after each individual test case
    teardown: function () { with(this) {
        TMUnitTest.addCommonTeardownFunctions(this);
    }},

    testJTMWriterRoleFragment: function () {
        var tm, writer, role, association, type, player, obj;
        tm = this.createTopicMap();
        writer = new TM.JTM.Writer(tm);
        association = tm.createAssociation();
        type = tm.createTopicBySubjectIdentifier(tm.createLocator(
            "http://psi.semanticheadache.com/test/type"));
        player = tm.createTopicBySubjectIdentifier(tm.createLocator(
            "http://psi.semanticheadache.com/test/player"));
        role = association.createRole(type, player);
        obj = writer.toObject(role);
    },

    testJTMWriterRoleFragment11: function () {
        var tm, tm2, writer, role, association, type, player, obj, reader;
        tm = this.createTopicMap();
        writer = new TM.JTM.Writer("1.1");
        writer.setPrefixes({test: 'http://psi.semanticheadache.com/test/'});
        association = tm.createAssociation();
        type = tm.createTopicBySubjectIdentifier(tm.createLocator(
            "http://psi.semanticheadache.com/test/type"));
        player = tm.createTopicBySubjectIdentifier(tm.createLocator(
            "http://psi.semanticheadache.com/test/player"));
        role = association.createRole(type, player);
        obj = writer.toObject(role);
        tm.remove();
        tm2 = this.createTopicMap('http://psi.semanticheadache.com/test');
        reader = new TM.JTM.Reader(tm2);
        reader.fromObject(obj);
    },
});
// ]]>
</script>
</body>
</html>

